# CHAOSS ç¤¾åŒºå¥åº·è¯„ä¼°æ¨¡å—

## ğŸ“‹ æ¦‚è¿°

æœ¬æ¨¡å—åŸºäº **CHAOSSï¼ˆCommunity Health Analytics Open Source Softwareï¼‰** æ ‡å‡†ï¼Œå¯¹å¼€æºé¡¹ç›®è¿›è¡Œç¤¾åŒºå¥åº·è¯„ä¼°ã€‚é‡‡ç”¨**æŒ‰æœˆè®¡ç®—è¯„åˆ†ï¼Œç„¶åå»é™¤å¼‚å¸¸å€¼åå–å¹³å‡å€¼**çš„ç­–ç•¥ï¼Œç¡®ä¿è¯„åˆ†æ›´åŠ ç¨³å®šå’Œå¯é ã€‚

### æ ¸å¿ƒè®¾è®¡ç†å¿µ

- **ä¿åºæ€§**ï¼šè¯„åˆ†ç®—æ³•ä¿æŒé¡¹ç›®ä¹‹é—´çš„ç›¸å¯¹æ’åºä¸å˜
- **åˆ†å¸ƒåˆç†æ€§**ï¼šé€šè¿‡ç™¾åˆ†ä½åˆ†å¸ƒæ˜ å°„ï¼Œä½¿åˆ†æ•°åˆ†å¸ƒç¬¦åˆçœŸå®å¼€æºç”Ÿæ€
- **æ•°æ®è´¨é‡æ„ŸçŸ¥**ï¼šè‡ªåŠ¨æ£€æµ‹å’Œå¤„ç†æ•°æ®è´¨é‡é—®é¢˜
- **å¼‚å¸¸å€¼å®¹å¿**ï¼šé™æƒè€Œéåˆ é™¤ï¼Œä¿ç•™æ›´å¤šä¿¡æ¯

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### 1. å¤šç»´åº¦è¯„ä¼°ä½“ç³»

åŸºäº CHAOSS æ ‡å‡†ï¼Œå°† 16 ä¸ª OpenDigger æŒ‡æ ‡æ˜ å°„åˆ° 6 ä¸ªè¯„ä¼°ç»´åº¦ï¼š

| ç»´åº¦ | ä¸­æ–‡åç§° | åŒ…å«æŒ‡æ ‡ | è¯´æ˜ |
|------|---------|---------|------|
| **Activity** | æ´»åŠ¨åº¦ | OpenRankã€æ´»è·ƒåº¦ã€å˜æ›´è¯·æ±‚ã€PRæ¥å—æ•°ã€æ–°å¢Issue | é¡¹ç›®æ•´ä½“æ´»è·ƒç¨‹åº¦ |
| **Contributors** | è´¡çŒ®è€… | å‚ä¸è€…æ•°ã€è´¡çŒ®è€…ã€æ–°å¢è´¡çŒ®è€… | è´¡çŒ®è€…æ•°é‡ã€å¢é•¿å’Œç•™å­˜ |
| **Responsiveness** | å“åº”æ€§ | å…³é—­Issueã€Issueè¯„è®º | Issueå’ŒPRçš„å“åº”é€Ÿåº¦ |
| **Quality** | ä»£ç è´¨é‡ | PRå®¡æŸ¥ã€ä»£ç æ–°å¢/åˆ é™¤/å˜æ›´è¡Œæ•° | ä»£ç å®¡æŸ¥å’Œå˜æ›´è§„æ¨¡ |
| **Risk** | é£é™© | æ€»çº¿å› å­ï¼ˆBus Factorï¼‰ | é¡¹ç›®é£é™©é›†ä¸­åº¦ |
| **Community Interest** | ç¤¾åŒºå…´è¶£ | Staræ•°ã€Forkæ•° | ç¤¾åŒºå…³æ³¨åº¦ |

### 2. æŒ‰æœˆè®¡ç®—è¯„åˆ†

- å¯¹æ¯ä¸ªæœˆä»½å•ç‹¬è®¡ç®— CHAOSS è¯„åˆ†
- ä½¿ç”¨æœ€è¿‘ 12 ä¸ªæœˆçš„æ•°æ®ï¼ˆå¦‚æœä¸è¶³ 12 ä¸ªæœˆï¼Œä½¿ç”¨æ‰€æœ‰å¯ç”¨æ•°æ®ï¼‰
- è‡ªåŠ¨è¿‡æ»¤ä»“åº“åˆ›å»ºä¹‹å‰çš„æœˆä»½ï¼Œç¡®ä¿æ—¶é—´èŒƒå›´åˆç†
- æ¯ä¸ªæœˆçš„è¯„åˆ†åŒ…æ‹¬ï¼š
  - æ€»ä½“å¾—åˆ†
  - å„ç»´åº¦å¾—åˆ†ï¼ˆå«æ•°æ®è´¨é‡å¾—åˆ†ï¼‰
  - æŒ‡æ ‡æ•°é‡ç»Ÿè®¡

### 3. æ”¹è¿›çš„å¼‚å¸¸å€¼æ£€æµ‹ä¸å¤„ç†

#### IQRï¼ˆå››åˆ†ä½è·ï¼‰æ–¹æ³•
- ä½¿ç”¨**çº¿æ€§æ’å€¼**è®¡ç®—åˆ†ä½æ•°ï¼Œæé«˜ç²¾åº¦
- **æŒ‰ç»´åº¦ä½¿ç”¨ä¸åŒçš„ IQR å€æ•°**ï¼š
  - Activity ç»´åº¦ï¼š`IQR Ã— 2.0`ï¼ˆæ³¢åŠ¨è¾ƒå¤§ï¼‰
  - å…¶ä»–ç»´åº¦ï¼š`IQR Ã— 1.5`ï¼ˆé»˜è®¤ï¼‰
- **å¼‚å¸¸å€¼é™æƒè€Œéåˆ é™¤**ï¼š
  - æ­£å¸¸å€¼æƒé‡ï¼š`1.0`
  - å¼‚å¸¸å€¼æƒé‡ï¼š`0.3`
  - ä¿ç•™æ›´å¤šä¿¡æ¯ï¼Œé¿å…æ•°æ®ä¸¢å¤±

### 4. æ•°æ®è´¨é‡æ£€æµ‹ä¸åŠ æƒ

#### è´¨é‡è¯„ä¼°ç»´åº¦
- **å¼‚å¸¸å€¼æ¯”ä¾‹**ï¼šæœ€å¤šæ‰£ 40%
- **é›¶å€¼æ¯”ä¾‹**ï¼šè¶…è¿‡ 30% å¼€å§‹æ‰£åˆ†ï¼Œæœ€å¤šæ‰£ 30%
- **æ•°æ®æœ‰æ•ˆæ€§**ï¼šæ£€æµ‹ Noneã€NaNã€Infã€è´Ÿæ•°ç­‰

#### è´¨é‡æŠ˜æŸæœºåˆ¶
```python
score = normalized_score * (0.7 + 0.3 * quality)
```
- æœ€å¤šæ‰£ 30%ï¼Œé¿å…ç³»ç»Ÿæ€§å‹åˆ†
- è´¨é‡å¾—åˆ†ä½äº 30% çš„æŒ‡æ ‡ä¼šè¢«è·³è¿‡

### 5. åŠ¨æ€å½’ä¸€åŒ–ç­–ç•¥

æ”¯æŒå¤šç§å½’ä¸€åŒ–ç­–ç•¥ï¼ŒæŒ‰ä¼˜å…ˆçº§è‡ªåŠ¨é€‰æ‹©ï¼š

#### ç­–ç•¥ 1ï¼šç™¾åˆ†ä½å½’ä¸€åŒ–ï¼ˆæ¨èï¼‰
```python
score = min(100, (value / p75) * 70)
```
- ä½¿ç”¨ 75% åˆ†ä½æ•°ä½œä¸ºå‚è€ƒ
- å€¼è¾¾åˆ° p75 æ—¶å¾— 70 åˆ†
   - é€‚åˆå¤§å¤šæ•°æŒ‡æ ‡

#### ç­–ç•¥ 2ï¼šåŸºå‡†å€¼å½’ä¸€åŒ–ï¼ˆ60åˆ†é”šç‚¹ï¼‰
```python
ratio = value / baseline
if ratio >= 2.0: score = min(100, 85 + (ratio - 2.0) * 5)
elif ratio >= 1.0: score = 60 + 25 * (ratio - 1.0)
else: score = 60 * ratio
```
- Baseline ä½œä¸º"å¥åº·ä½†ä¸ä¼˜ç§€"æ°´å¹³ï¼Œå¯¹åº” 60 åˆ†
- é€‚åˆæœ‰æ˜ç¡®æ ‡å‡†çš„æŒ‡æ ‡ï¼ˆå¦‚ OpenRankã€Bus Factorï¼‰

#### ç­–ç•¥ 3ï¼šå¯¹æ•°å°ºåº¦å½’ä¸€åŒ–
```python
score = min(100, log10(1 + value) * 50)
```
- é€‚åˆè·¨åº¦å¾ˆå¤§çš„æŒ‡æ ‡ï¼ˆå¦‚ Star æ•°ã€ä»£ç è¡Œæ•°ï¼‰

#### ç­–ç•¥ 4ï¼šç®€å•çº¿æ€§å½’ä¸€åŒ–ï¼ˆå›é€€ï¼‰
```python
score = min(100, (value / max_value) * 100)
```
   - ä½œä¸ºæœ€åçš„å›é€€æ–¹æ¡ˆ

### 6. å¢é•¿å‹æŒ‡æ ‡ä¿æŠ¤

å¯¹äºå¢é•¿å‹æŒ‡æ ‡ï¼ˆGROWTHã€INDEX ç±»å‹ï¼‰ï¼š
```python
final_value = max(å½“å‰å€¼, æœ€è¿‘3æœˆå‡å€¼)
```
- é¿å…å‹åˆ¶æ­£åœ¨æˆé•¿çš„é¡¹ç›®
- é€‚ç”¨äºï¼šOpenRankã€æ´»è·ƒåº¦ã€æ–°å¢è´¡çŒ®è€…ã€Star æ•°ç­‰

### 7. å¥åº·è½¯ä¸‹é™

```python
dimension_score = max(30.0, dimension_score)
```
- ç»´åº¦å¾—åˆ†è®¾ç½® 30 åˆ†è½¯ä¸‹é™
- é¿å…æŒç»­ç»´æŠ¤çš„é¡¹ç›®è¢«è¯¯è¯„ä¸ºæä½åˆ†
- å…è®¸çœŸæ­£è¡¨ç°å·®çš„ç»´åº¦å¾—åˆ°ä½åˆ†

### 8. ç™¾åˆ†ä½åˆ†å¸ƒæ˜ å°„ï¼ˆæ ¸å¿ƒç‰¹æ€§ï¼‰

**æ ¸å¿ƒæ€æƒ³**ï¼šè¯„åˆ†ä¸æ˜¯çœ‹"ä½ æœ‰å¤šå¥½"ï¼Œè€Œæ˜¯çœ‹"ä½ æ‰“è´¥äº†å¤šå°‘é¡¹ç›®"

#### å·¥ä½œåŸç†
1. **è¿è¡Œæ—¶ç¼“å­˜**ï¼šä½¿ç”¨æœ€è¿‘ 500 ä¸ªé¡¹ç›®çš„åŸå§‹åˆ†æ•°ä½œä¸ºå‚è€ƒåˆ†å¸ƒ
2. **å»é‡æœºåˆ¶**ï¼šä½¿ç”¨å­—å…¸è®°å½•æ¯ä¸ªé¡¹ç›®çš„æœ€æ–°åˆ†æ•°ï¼Œé¿å…é‡å¤æ·»åŠ å¯¼è‡´åˆ†å¸ƒåç§»
3. **åˆ†å¸ƒå¯¹é½**ï¼šå°†åŸå§‹åˆ†æ•°æ˜ å°„åˆ° [30, 100] èŒƒå›´
4. **ä¿åºæ€§**ï¼šä¸æ”¹å˜é¡¹ç›®ä¹‹é—´çš„ç›¸å¯¹æ’åº

#### æ•ˆæœ
- å‰ 15-20% çš„é¡¹ç›®å¾—åˆ† > 80 åˆ†
- ä¸­ä½é¡¹ç›®å¾—åˆ†åœ¨ 60-65 åˆ†
- æœ€å·®é¡¹ç›®å¾—åˆ† < 40 åˆ†
- é¡¹ç›®æ’åºå®Œå…¨ä¸å˜

#### åŒé‡è¾“å‡º
- **æ˜ å°„ååˆ†æ•°**ï¼ˆ`overall_score`ï¼‰ï¼šç”¨äºç”¨æˆ·å±•ç¤º
- **åŸå§‹åˆ†æ•°**ï¼ˆ`_raw_overall_score`ï¼‰ï¼šç”¨äºç®—æ³•åˆ¤æ–­å’Œç ”ç©¶
- **ç™¾åˆ†ä½æ’å**ï¼ˆ`_percentile`ï¼‰ï¼šæ’åå‰ X%

## ğŸ”„ è®¡ç®—æµç¨‹

```
1. è·å–æ—¶åºæ•°æ®ï¼ˆä»æœ¬åœ° timeseries_for_model ç›®å½•ï¼‰
   â†“
2. è·å–ä»“åº“åˆ›å»ºæ—¶é—´ï¼Œè¿‡æ»¤ä¸åˆç†çš„æ—¶é—´èŒƒå›´
   â†“
3. æå–æ‰€æœ‰å¯ç”¨æœˆä»½ï¼ˆä»…åŒ…å«åˆ›å»ºæ—¶é—´ä¹‹åçš„æœˆä»½ï¼‰
   â†“
4. é€‰æ‹©æœ€è¿‘12ä¸ªæœˆï¼ˆæˆ–æ‰€æœ‰å¯ç”¨æœˆä»½ï¼‰
   â†“
5. å¯¹æ¯ä¸ªæœˆå•ç‹¬è®¡ç®—è¯„åˆ†ï¼š
   â”œâ”€ æå–è¯¥æœˆçš„æ‰€æœ‰æŒ‡æ ‡å€¼
   â”œâ”€ å¯¹å¢é•¿å‹æŒ‡æ ‡ä½¿ç”¨ max(å½“å‰å€¼, æœ€è¿‘3æœˆå‡å€¼)
   â”œâ”€ å¯¹æ¯ä¸ªæŒ‡æ ‡å½’ä¸€åŒ–ï¼ˆä½¿ç”¨é…ç½®çš„ç­–ç•¥ï¼‰
   â”œâ”€ åº”ç”¨è´¨é‡æŠ˜æŸï¼ˆæœ€å¤šæ‰£30%ï¼‰
   â”œâ”€ æŒ‰ç»´åº¦èšåˆï¼ˆåŠ æƒå¹³å‡ï¼‰
   â”œâ”€ åº”ç”¨å¥åº·è½¯ä¸‹é™ï¼ˆæœ€ä½30åˆ†ï¼‰
   â””â”€ è®¡ç®—æ€»ä½“å¾—åˆ†
   â†“
6. æ”¶é›†æ‰€æœ‰æœˆä»½çš„è¯„åˆ†
   â†“
7. ä½¿ç”¨æ”¹è¿›çš„IQRæ–¹æ³•æ£€æµ‹å¼‚å¸¸å€¼ï¼ˆæŒ‰ç»´åº¦ä½¿ç”¨ä¸åŒå€æ•°ï¼‰
   â†“
8. å¼‚å¸¸å€¼é™æƒåè®¡ç®—æœ€ç»ˆè¯„åˆ†ï¼ˆåŠ æƒå¹³å‡ï¼‰
   â†“
9. åº”ç”¨ç™¾åˆ†ä½åˆ†å¸ƒæ˜ å°„
   â†“
10. ç”Ÿæˆè¯„ä»·æŠ¥å‘Šï¼ˆåŒ…å«æ”¹è¿›å»ºè®®ï¼‰
```

## ğŸ“Š API æ¥å£

### GET `/api/chaoss/<repo_key>`

è·å–ä»“åº“çš„ CHAOSS è¯„ä»·ç»“æœã€‚

**å‚æ•°ï¼š**
- `repo_key`: ä»“åº“æ ‡è¯†ï¼ˆæ”¯æŒ `owner/repo` æˆ– `owner_repo` æ ¼å¼ï¼‰

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "repo_key": "odoo/odoo",
  "time_range": {
    "start": "2014-05",
    "end": "2025-12",
    "total_months": 141,
    "evaluated_months": 12,
    "valid_months": 12,
    "repo_created_month": "2014-05"
  },
  "monthly_scores": [
    {
      "month": "2025-01",
      "score": {
        "overall_score": 75.3,
        "dimensions": {
          "Activity": {
            "score": 80.5,
            "metrics_count": 5,
            "quality": 0.85
          },
          "Contributors": {
            "score": 70.2,
            "metrics_count": 3,
            "quality": 0.92
          }
        }
      }
    }
  ],
  "final_scores": {
    "overall_score": 73.8,
    "overall_level": "è‰¯å¥½",
    "_raw_overall_score": 65.2,
    "_percentile": 68.5,
    "dimensions": {
      "Activity": {
        "score": 78.2,
        "level": "è‰¯å¥½",
        "monthly_count": 12,
        "outliers_removed": 1,
        "quality": 0.85
      }
    }
  },
  "report": {
    "summary": "ç»¼åˆè¯„åˆ†: 73.8åˆ† (è‰¯å¥½) Â· æ’åå‰68.5%",
    "recommendations": [
      "é¡¹ç›®æ’åå‰68.5%ï¼Œå¤„äºä¸­ä¸Šæ°´å¹³ï¼Œå»ºè®®é‡ç‚¹å…³æ³¨è–„å¼±ç»´åº¦ä»¥è¿›ä¸€æ­¥æå‡",
      "è¿‘6ä¸ªæœˆè¯„åˆ†ç¨³æ­¥æå‡2.3åˆ†ï¼Œé¡¹ç›®å¤„äºä¸Šå‡æœŸï¼Œå»ºè®®æŒç»­ä¼˜åŒ–",
      "ä»£ç è´¨é‡ç»´åº¦å¾—åˆ†è¾ƒä½(45.2åˆ†)ï¼Œå»ºè®®åŠ å¼ºä»£ç å®¡æŸ¥ï¼Œæé«˜ä»£ç è´¨é‡æ ‡å‡†ï¼Œå‡å°‘æŠ€æœ¯å€ºåŠ¡"
    ]
  }
}
```

### GET `/api/chaoss/<repo_key>/dimensions`

è·å– CHAOSS ç»´åº¦æ˜ å°„ä¿¡æ¯ã€‚

## ğŸ“ æ–‡ä»¶ç»“æ„

```
CHAOSSEvaluation/
â”œâ”€â”€ __init__.py              # æ¨¡å—åˆå§‹åŒ–ï¼Œå¯¼å‡ºå…¬å…±æ¥å£
â”œâ”€â”€ chaoss_mapper.py         # CHAOSS ç»´åº¦æ˜ å°„ï¼ˆ6ä¸ªç»´åº¦ï¼Œ16ä¸ªæŒ‡æ ‡ï¼‰
â”œâ”€â”€ chaoss_calculator.py     # è¯„åˆ†è®¡ç®—å™¨ï¼ˆæ ¸å¿ƒç®—æ³•ï¼‰
â”œâ”€â”€ chaoss_metric_config.py  # æŒ‡æ ‡é…ç½®ï¼ˆç±»å‹ã€æƒé‡ã€å½’ä¸€åŒ–ç­–ç•¥ï¼‰
â”œâ”€â”€ quality_utils.py         # æ•°æ®è´¨é‡è¯„ä¼°å’Œå½’ä¸€åŒ–å·¥å…·
â”œâ”€â”€ distribution_aligner.py  # ç™¾åˆ†ä½åˆ†å¸ƒå¯¹é½å™¨
â””â”€â”€ README.md               # æœ¬æ–‡æ¡£
```

## ğŸ’» ä½¿ç”¨ç¤ºä¾‹

### åŸºæœ¬ä½¿ç”¨

```python
from CHAOSSEvaluation import CHAOSSEvaluator
from data_service import DataService

# åˆå§‹åŒ–
data_service = DataService()
evaluator = CHAOSSEvaluator(data_service)

# è¯„ä¼°ä»“åº“
result = evaluator.evaluate_repo('odoo/odoo')

# æŸ¥çœ‹ç»“æœ
print(f"ç»¼åˆè¯„åˆ†: {result['final_scores']['overall_score']}")
print(f"ç­‰çº§: {result['final_scores']['overall_level']}")
print(f"ç™¾åˆ†ä½æ’å: {result['final_scores']['_percentile']}%")

# æŸ¥çœ‹å„ç»´åº¦è¯„åˆ†å’Œè´¨é‡
for dimension, data in result['final_scores']['dimensions'].items():
    print(f"{dimension}: {data['score']}åˆ† (è´¨é‡: {data['quality']})")

# æŸ¥çœ‹æ”¹è¿›å»ºè®®
for rec in result['report']['recommendations']:
    print(f"- {rec}")
```

### è‡ªå®šä¹‰æŒ‡æ ‡é…ç½®

```python
from CHAOSSEvaluation import get_metric_config, MetricConfig, MetricType

# è·å–æŒ‡æ ‡é…ç½®
config = get_metric_config('opendigger_OpenRank')
print(config.type)              # MetricType.INDEX
print(config.weight)            # 1.5
print(config.iqr_multiplier)   # 1.5
print(config.use_percentile)   # True
print(config.baseline)          # 100.0
```

### ä½¿ç”¨è´¨é‡å·¥å…·å‡½æ•°

```python
from CHAOSSEvaluation import (
    evaluate_data_quality,
    normalize_value,
    apply_quality_penalty
)

# è¯„ä¼°æ•°æ®è´¨é‡
quality_result = evaluate_data_quality([1, 2, 3, 4, 5], config)
print(f"è´¨é‡å¾—åˆ†: {quality_result['quality']}")
print(f"å¼‚å¸¸å€¼æ•°é‡: {quality_result['outliers']}")

# å½’ä¸€åŒ–å€¼
normalized = normalize_value(100.0, config, historical_values=[50, 60, 70, 80, 90])
print(f"å½’ä¸€åŒ–å¾—åˆ†: {normalized}")

# åº”ç”¨è´¨é‡æŠ˜æŸ
final_score = apply_quality_penalty(normalized, quality_result['quality'])
print(f"æœ€ç»ˆå¾—åˆ†: {final_score}")
```

## ğŸ“ˆ æŒ‡æ ‡ç±»å‹è¯´æ˜

### MetricType æšä¸¾

| ç±»å‹ | è¯´æ˜ | ç¤ºä¾‹æŒ‡æ ‡ |
|------|------|---------|
| `COUNT` | è®¡æ•°ç±» | PRæ•°ã€Issueæ•°ã€Staræ•° |
| `RATE` | æ¯”ç‡ç±» | æ¥å—ç‡ã€å…³é—­ç‡ |
| `TIME` | æ—¶é—´ç±» | å“åº”æ—¶é—´ |
| `GROWTH` | å¢é•¿ç±» | æ–°å¢è´¡çŒ®è€… |
| `INDEX` | æŒ‡æ•°ç±» | OpenRankã€æ´»è·ƒåº¦ |
| `FACTOR` | å› å­ç±» | Bus Factor |

### æŒ‡æ ‡é…ç½®é¡¹

æ¯ä¸ªæŒ‡æ ‡å¯ä»¥é…ç½®ï¼š

- `type`: æŒ‡æ ‡ç±»å‹ï¼ˆå½±å“IQRå€æ•°é€‰æ‹©ï¼‰
- `weight`: æƒé‡ï¼ˆé»˜è®¤1.0ï¼‰
- `iqr_multiplier`: IQRå€æ•°ï¼ˆé»˜è®¤1.5ï¼‰
- `use_percentile`: æ˜¯å¦ä½¿ç”¨ç™¾åˆ†ä½å½’ä¸€åŒ–
- `baseline`: åŸºå‡†å€¼ï¼ˆç”¨äºåŸºå‡†å€¼å½’ä¸€åŒ–ï¼‰
- `log_scale`: æ˜¯å¦ä½¿ç”¨å¯¹æ•°å°ºåº¦
- `higher_is_better`: å€¼è¶Šå¤§è¶Šå¥½ï¼ˆFalseè¡¨ç¤ºè¶Šå°è¶Šå¥½ï¼‰

## ğŸ”§ ç®—æ³•æ”¹è¿›è¯´æ˜

### 1. ç™¾åˆ†ä½åˆ†å¸ƒæ˜ å°„ï¼ˆæ ¸å¿ƒæ”¹è¿›ï¼‰

**é—®é¢˜**ï¼šåŸå§‹ç®—æ³•è™½ç„¶èƒ½ç»™å‡ºæ­£ç¡®çš„é¡¹ç›®æ’åºï¼Œä½†åˆ†æ•°æ™®éåä½ï¼Œä¸ç¬¦åˆç”¨æˆ·ç›´è§‰ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼šåœ¨æœ€ç»ˆè¾“å‡ºå‰ï¼Œä½¿ç”¨ç™¾åˆ†ä½åˆ†å¸ƒæ˜ å°„å°†åŸå§‹åˆ†æ•°æ˜ å°„åˆ°ç›®æ ‡åˆ†å¸ƒèŒƒå›´ã€‚

**å®ç°ç»†èŠ‚**ï¼š
- ä½¿ç”¨å­—å…¸ `_repo_scores_cache` è®°å½•æ¯ä¸ªé¡¹ç›®çš„æœ€æ–°åˆ†æ•°
- é¿å…é‡å¤æ·»åŠ å¯¼è‡´åˆ†å¸ƒåç§»
- ä»…åœ¨åˆ†æ•°åˆ—è¡¨å˜åŒ–æ—¶é‡æ–°åˆ›å»ºåˆ†å¸ƒå¯¹é½å™¨ï¼ˆæ€§èƒ½ä¼˜åŒ–ï¼‰
- ä½¿ç”¨ç´¢å¼•è€Œé `remove()` æ–¹æ³•ï¼Œç¡®ä¿ç§»é™¤æ­£ç¡®çš„åˆ†æ•°

**æ•ˆæœå¯¹æ¯”**ï¼š

| åŸå§‹åˆ†æ•° | ç™¾åˆ†ä½ | æ˜ å°„ååˆ†æ•° |
|---------|--------|-----------|
| 32 | 0% | 30 |
| 45 | 33% | 53 |
| 58 | 50% | 65 |
| 72 | 83% | 88 |
| 88 | 100% | 100 |

### 2. è´¨é‡æŠ˜æŸæœºåˆ¶ï¼ˆé¿å…ç³»ç»Ÿæ€§å‹åˆ†ï¼‰

**åŸç®—æ³•é—®é¢˜**ï¼š`final_score = normalized_score * quality_score` ä¼šå¯¼è‡´ç³»ç»Ÿæ€§å‹åˆ†

**æ”¹è¿›ç®—æ³•**ï¼š
```python
def apply_quality_penalty(score: float, quality: float) -> float:
    return score * (0.7 + 0.3 * quality)
```

**æ•ˆæœå¯¹æ¯”**ï¼š

| æƒ…å†µ | åŸç®—æ³• | æ”¹è¿›ç®—æ³• |
|------|--------|----------|
| 80åˆ†ï¼Œè´¨é‡0.6 | 48 | **65.6** |
| 80åˆ†ï¼Œè´¨é‡0.9 | 72 | **77.6** |

### 3. Baselineå½’ä¸€åŒ–æ”¹è¿›ï¼ˆ60åˆ†é”šç‚¹ï¼‰

**åŸç®—æ³•é—®é¢˜**ï¼šBaselineè¢«å½“ä½œä¼˜ç§€æ°´å¹³ï¼ˆ100åˆ†ï¼‰ï¼Œå¯¼è‡´è¯„åˆ†åä½

**æ”¹è¿›ç®—æ³•**ï¼š
- Baselineä½œä¸º"å¥åº·ä½†ä¸ä¼˜ç§€"æ°´å¹³ï¼Œå¯¹åº”60åˆ†
- è¾¾åˆ°baselineå¾—60åˆ†ï¼Œ2å€baselineå¾—85åˆ†

### 4. IQRè®¡ç®—ç²¾åº¦æ”¹è¿›

**æ”¹è¿›ç‚¹**ï¼š
- ä½¿ç”¨ `_percentile()` æ–¹æ³•è®¡ç®—åˆ†ä½æ•°
- ä½¿ç”¨çº¿æ€§æ’å€¼ï¼Œæé«˜å°æ ·æœ¬ç²¾åº¦
- ç»Ÿä¸€ `_remove_outliers_and_average()` å’Œ `_get_valid_scores()` çš„è®¡ç®—æ–¹æ³•

### 5. æ”¹è¿›å»ºè®®ç”Ÿæˆ

**ç‰¹æ€§**ï¼š
- åŸºäºé¡¹ç›®å®é™…æ•°æ®ç”Ÿæˆä¸ªæ€§åŒ–å»ºè®®
- åˆ†ææœˆåº¦è¶‹åŠ¿ï¼ˆ3ä¸ªæœˆã€6ä¸ªæœˆï¼‰
- è¯†åˆ«è–„å¼±ç»´åº¦å’Œå¼ºé¡¹ç»´åº¦
- åˆ†æç»´åº¦ç»„åˆé—®é¢˜
- è€ƒè™‘æ•°æ®è´¨é‡å’Œå¼‚å¸¸å€¼

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æ•°æ®è´¨é‡**ï¼šå¦‚æœæŸä¸ªæœˆä»½çš„æ•°æ®è´¨é‡è¿‡ä½ï¼ˆè´¨é‡å¾—åˆ†<30%ï¼‰ï¼Œè¯¥æœˆä»½ä¼šè¢«è·³è¿‡
2. **ç¼ºå¤±æ•°æ®å¤„ç†**ï¼šç¼ºå¤±æ•°æ®ä¸ä¼šè¢«å½“ä½œ0å¤„ç†ï¼Œä¼šç›´æ¥è·³è¿‡è¯¥æŒ‡æ ‡
3. **æ—¶é—´èŒƒå›´**ï¼šè‡ªåŠ¨è¿‡æ»¤ä»“åº“åˆ›å»ºä¹‹å‰çš„æœˆä»½ï¼Œç¡®ä¿æ—¶é—´èŒƒå›´åˆç†
4. **å¼‚å¸¸å€¼å¤„ç†**ï¼šä½¿ç”¨æ”¹è¿›çš„IQRæ–¹æ³•ï¼ŒæŒ‰ç»´åº¦ä½¿ç”¨ä¸åŒå€æ•°ï¼Œå¼‚å¸¸å€¼é™æƒè€Œéåˆ é™¤
5. **æœˆä»½é€‰æ‹©**ï¼šé»˜è®¤ä½¿ç”¨æœ€è¿‘12ä¸ªæœˆçš„æ•°æ®ï¼Œå¦‚æœæ•°æ®ä¸è¶³åˆ™ä½¿ç”¨æ‰€æœ‰å¯ç”¨æ•°æ®
6. **å½’ä¸€åŒ–åŸºå‡†**ï¼šæ ¹æ®æŒ‡æ ‡é…ç½®é€‰æ‹©æœ€é€‚åˆçš„å½’ä¸€åŒ–ç­–ç•¥
7. **ç¼“å­˜ç®¡ç†**ï¼šåˆ†å¸ƒå¯¹é½å™¨ä½¿ç”¨æœ€è¿‘500ä¸ªé¡¹ç›®çš„åˆ†æ•°ï¼Œè¶…è¿‡åä½¿ç”¨FIFOç­–ç•¥ç§»é™¤æœ€æ—§çš„é¡¹ç›®

## ğŸ“Š è¯„åˆ†ç­‰çº§

| ç­‰çº§ | åˆ†æ•°èŒƒå›´ | è¯´æ˜ |
|------|---------|------|
| **ä¼˜ç§€** | â‰¥ 80åˆ† | é¡¶çº§å¼€æºé¡¹ç›® |
| **è‰¯å¥½** | â‰¥ 60åˆ† | å¥åº·åº¦è‰¯å¥½ |
| **ä¸€èˆ¬** | â‰¥ 40åˆ† | å¤„äºä¸­ç­‰æ°´å¹³ |
| **è¾ƒå·®** | â‰¥ 20åˆ† | å¥åº·åº¦åä½ |
| **å¾ˆå·®** | < 20åˆ† | å¥åº·åº¦è¾ƒä½ |

## ğŸ” æŠ€æœ¯ç»†èŠ‚

### æ•°æ®è´¨é‡è¯„ä¼°

è´¨é‡å¾—åˆ†è®¡ç®—è€ƒè™‘ï¼š
- **å¼‚å¸¸å€¼æ¯”ä¾‹**ï¼šæœ€å¤šæ‰£40%
- **é›¶å€¼æ¯”ä¾‹**ï¼šè¶…è¿‡30%å¼€å§‹æ‰£åˆ†ï¼Œæœ€å¤šæ‰£30%
- **æœ€ç»ˆè´¨é‡å¾—åˆ†èŒƒå›´**ï¼š0.1 - 1.0

### å¼‚å¸¸å€¼æ£€æµ‹

ä½¿ç”¨æ”¹è¿›çš„IQRæ–¹æ³•ï¼š
```
Q1 = 25%åˆ†ä½æ•°ï¼ˆä½¿ç”¨çº¿æ€§æ’å€¼ï¼‰
Q3 = 75%åˆ†ä½æ•°ï¼ˆä½¿ç”¨çº¿æ€§æ’å€¼ï¼‰
IQR = Q3 - Q1
ä¸‹ç•Œ = Q1 - IQRå€æ•° Ã— IQR
ä¸Šç•Œ = Q3 + IQRå€æ•° Ã— IQR
å¼‚å¸¸å€¼ = ä¸åœ¨ [ä¸‹ç•Œ, ä¸Šç•Œ] èŒƒå›´å†…çš„å€¼
```

### å½’ä¸€åŒ–ç®—æ³•

#### 1. ç™¾åˆ†ä½å½’ä¸€åŒ–
   ```
   score = min(100, (value / p75) * 70)
   ```

#### 2. åŸºå‡†å€¼å½’ä¸€åŒ–ï¼ˆæ”¹è¿›ç‰ˆï¼‰
   ```
   ratio = value / baseline
   if ratio >= 2.0: score = min(100, 85 + (ratio - 2.0) * 5)
   elif ratio >= 1.0: score = 60 + 25 * (ratio - 1.0)
   else: score = 60 * ratio
   ```

#### 3. å¯¹æ•°å°ºåº¦å½’ä¸€åŒ–
   ```
   score = min(100, log10(1 + value) * 50)
   ```

## ğŸ“¦ æ•°æ®æ¥æº

**é‡è¦ï¼šæœ¬æ¨¡å—ä»…ä»æœ¬åœ°æ•°æ®åŠ è½½ï¼Œä¸è¿›è¡Œä»»ä½•APIè°ƒç”¨æˆ–æ•°æ®çˆ¬å–ã€‚**

- **OpenDigger æŒ‡æ ‡**ï¼šä» `timeseries_for_model/*.json` ä¸­çš„ `opendigger_metrics` è¯»å–
- **æ•°æ®æ ¼å¼**ï¼š`{"OpenRank": 385.77, "æ´»è·ƒåº¦": 928.6, ...}`
- **ç¼ºå¤±æ•°æ®å¤„ç†**ï¼šç¼ºå¤±æ•°æ®ä¸ä¼šè¢«å½“ä½œ0å¤„ç†ï¼Œå¦‚æœæŸä¸ªæœˆä»½æŸä¸ªæŒ‡æ ‡ä¸å­˜åœ¨ï¼Œä¼šç›´æ¥è·³è¿‡è¯¥æŒ‡æ ‡ï¼Œä¸ä¼šå½±å“è¯„åˆ†

## ğŸ¯ é¢„æœŸæ•ˆæœ

ç»è¿‡æ”¹è¿›ç®—æ³•åï¼š

- âœ… **å¹³å‡åˆ†æ•´ä½“æå‡ 10-20 åˆ†**
- âœ… **é¡¹ç›®å·®è·ä»ç„¶æ¸…æ™°**ï¼ˆä¸æ˜¯å¤§å®¶éƒ½80åˆ†ï¼‰
- âœ… **å¤´éƒ¨é¡¹ç›®ä¾ç„¶ >80 åˆ†**
- âœ… **ä¸­å°å¥åº·é¡¹ç›® â‰ˆ 55-70 åˆ†**ï¼ˆåˆç†ï¼‰
- âœ… **é—®é¢˜é¡¹ç›®ä»ç„¶ <50 åˆ†**
- âœ… **è¯„åˆ†ç¨³å®š**ï¼ˆä¸ä¼šå› ä¸ºé‡å¤è¯„ä¼°è€Œå˜å°ï¼‰

## ğŸš€ æœªæ¥æ”¹è¿›æ–¹å‘

1. æ”¯æŒæ›´å¤šæŒ‡æ ‡ç±»å‹å’Œå½’ä¸€åŒ–ç­–ç•¥
2. æœºå™¨å­¦ä¹ è¾…åŠ©çš„å¼‚å¸¸å€¼æ£€æµ‹
3. åŠ¨æ€è°ƒæ•´IQRå€æ•°
4. æ›´ç»†ç²’åº¦çš„æ•°æ®è´¨é‡è¯„ä¼°
5. æ”¯æŒè‡ªå®šä¹‰è¯„åˆ†è§„åˆ™
6. å¢åŠ æ›´å¤šç»´åº¦çš„æ”¹è¿›å»ºè®®
7. æ”¯æŒè¯„åˆ†å†å²è¶‹åŠ¿åˆ†æ

## ğŸ“ æ›´æ–°æ—¥å¿—

### æœ€æ–°ç‰ˆæœ¬æ”¹è¿›

1. **ä¿®å¤è¯„åˆ†å˜å°é—®é¢˜**ï¼šä½¿ç”¨å­—å…¸è®°å½•æ¯ä¸ªé¡¹ç›®çš„æœ€æ–°åˆ†æ•°ï¼Œé¿å…é‡å¤æ·»åŠ å¯¼è‡´åˆ†å¸ƒåç§»
2. **ä¼˜åŒ–åˆ†å¸ƒå¯¹é½å™¨**ï¼šä»…åœ¨åˆ†æ•°åˆ—è¡¨å˜åŒ–æ—¶é‡æ–°åˆ›å»ºï¼Œæå‡æ€§èƒ½
3. **æ”¹è¿›IQRè®¡ç®—ç²¾åº¦**ï¼šä½¿ç”¨çº¿æ€§æ’å€¼è®¡ç®—åˆ†ä½æ•°ï¼Œæé«˜å°æ ·æœ¬ç²¾åº¦
4. **ä¿®å¤remove()æ–¹æ³•**ï¼šä½¿ç”¨ç´¢å¼•å®šä½ï¼Œç¡®ä¿ç§»é™¤æ­£ç¡®çš„åˆ†æ•°
5. **é™ä½è½¯ä¸‹é™**ï¼šä»40åˆ†é™è‡³30åˆ†ï¼Œå…è®¸çœŸæ­£è¡¨ç°å·®çš„ç»´åº¦å¾—åˆ°ä½åˆ†
6. **æ”¹è¿›å»ºè®®ç”Ÿæˆ**ï¼šåŸºäºé¡¹ç›®å®é™…æ•°æ®ç”Ÿæˆæ›´ä¸ªæ€§åŒ–ã€æ›´å…·ä½“çš„å»ºè®®

---

**ä½œè€…**ï¼šOpenVista Team  
**ç‰ˆæœ¬**ï¼š2.0  
**æœ€åæ›´æ–°**ï¼š2025-01-07
