# LLM2TSA æ¶æ„è®¾è®¡å›¾

## ğŸ“ ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç”¨æˆ·ç•Œé¢å±‚ (UI Layer)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ æ—¶åºæ•°æ®å±•ç¤º  â”‚  â”‚ å¢å¼ºä¿¡æ¯å±•ç¤º  â”‚  â”‚ é¢„æµ‹ç»“æœå±•ç¤º  â”‚        â”‚
â”‚  â”‚ (Chartç»„ä»¶)   â”‚  â”‚ (Description)â”‚  â”‚ (Forecast)    â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚  â”‚ æ™ºèƒ½åˆ†ææŠ¥å‘Š  â”‚  â”‚ æ™ºèƒ½é—®ç­”ç•Œé¢  â”‚                          â”‚
â”‚  â”‚ (Analysis)   â”‚  â”‚ (Chat)        â”‚                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†• HTTP/SSE
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      APIæœåŠ¡å±‚ (API Layer)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Flask App (app.py)                                      â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚  â”‚
â”‚  â”‚  â”‚ /api/enhanceâ”‚  â”‚/api/predictâ”‚  â”‚/api/agent  â”‚      â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   LLM2TSAæ ¸å¿ƒå±‚ (Core Layer)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  æ¨¡å¼1: LLMè¾…åŠ©å¢å¼ºå™¨ (Enhancer)                          â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚ TimeSeriesEnhancer                                  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€ enhance_metric()    ç”ŸæˆæŒ‡æ ‡æè¿°                â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€ detect_trends()     è¯†åˆ«è¶‹åŠ¿æ¨¡å¼                â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€ extract_key_points()æå–å…³é”®ç‚¹                  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€ generate_summary() ç”Ÿæˆæ•´ä½“æ€»ç»“                â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  æ¨¡å¼2: LLMä¸ºä¸­å¿ƒçš„é¢„æµ‹å™¨ (Predictor)                     â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚ LLMTimeSeriesPredictor                              â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€ predict()           é¢„æµ‹æœªæ¥å€¼                  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€ format_timeseries() æ•°æ®æ ¼å¼åŒ–                  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€ build_prompt()      Promptæ„å»º                  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€ parse_result()      ç»“æœè§£æ                    â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  æ¨¡å¼3: LLMèµ‹èƒ½çš„æ™ºèƒ½ä½“ (Agent)                          â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚ TimeSeriesAgent                                    â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€ analyze_repository()  ç»¼åˆåˆ†æ                  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€ load_knowledge()      åŠ è½½çŸ¥è¯†åº“                â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€ find_similar_repos()  æŸ¥æ‰¾ç›¸ä¼¼é¡¹ç›®              â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€ generate_report()    ç”ŸæˆæŠ¥å‘Š                  â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ç»Ÿä¸€LLMå®¢æˆ·ç«¯ (LLM Client)                               â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚ UnifiedLLMClient                                  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€ DeepSeekClient    DeepSeek API                â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€ OpenAIClient      OpenAI API (å¯é€‰)            â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€ ClaudeClient      Claude API (å¯é€‰)            â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      æ•°æ®æœåŠ¡å±‚ (Data Layer)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ DataService                                               â”‚  â”‚
â”‚  â”‚  â”œâ”€ get_grouped_timeseries()  è·å–åˆ†ç»„æ—¶åºæ•°æ®           â”‚  â”‚
â”‚  â”‚  â”œâ”€ get_repo_summary()         è·å–ä»“åº“æ‘˜è¦               â”‚  â”‚
â”‚  â”‚  â””â”€ get_issues_by_month()      è·å–æœˆåº¦Issueæ•°æ®          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      æ•°æ®å­˜å‚¨å±‚ (Storage Layer)                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ æ—¶åºæ•°æ®æ–‡ä»¶  â”‚  â”‚ æ–‡æœ¬æ•°æ®æ–‡ä»¶  â”‚  â”‚ çŸ¥è¯†åº“æ–‡ä»¶    â”‚      â”‚
â”‚  â”‚ (JSON/CSV)   â”‚  â”‚ (JSON/TXT)   â”‚  â”‚ (JSON/DB)    â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ æ•°æ®æµå›¾

### 1. æ•°æ®å¢å¼ºæµç¨‹

```
æ—¶åºæ•°æ® (timeseries_data.json)
    â”‚
    â”œâ”€â†’ TimeSeriesEnhancer.enhance_metric()
    â”‚       â”‚
    â”‚       â”œâ”€â†’ æ ¼å¼åŒ–æ•°æ®
    â”‚       â”‚
    â”‚       â”œâ”€â†’ æ„å»ºPrompt
    â”‚       â”‚       â”‚
    â”‚       â”‚       â””â”€â†’ UnifiedLLMClient.generate()
    â”‚       â”‚               â”‚
    â”‚       â”‚               â””â”€â†’ DeepSeek API
    â”‚       â”‚
    â”‚       â””â”€â†’ è§£æç»“æœ
    â”‚
    â””â”€â†’ å¢å¼ºæ•°æ® (timeseries_data_enhanced.json)
            â”‚
            â””â”€â†’ APIè¿”å› â†’ å‰ç«¯å±•ç¤º
```

### 2. é¢„æµ‹æµç¨‹

```
å†å²æ—¶åºæ•°æ®
    â”‚
    â”œâ”€â†’ LLMTimeSeriesPredictor.predict()
    â”‚       â”‚
    â”‚       â”œâ”€â†’ format_timeseries()
    â”‚       â”‚       â””â”€â†’ è½¬æ¢ä¸ºæ–‡æœ¬æ ¼å¼
    â”‚       â”‚
    â”‚       â”œâ”€â†’ build_prompt()
    â”‚       â”‚       â””â”€â†’ æ„å»ºé¢„æµ‹Prompt
    â”‚       â”‚
    â”‚       â”œâ”€â†’ UnifiedLLMClient.generate()
    â”‚       â”‚       â””â”€â†’ LLMç”Ÿæˆé¢„æµ‹
    â”‚       â”‚
    â”‚       â””â”€â†’ parse_result()
    â”‚               â””â”€â†’ è§£æJSONç»“æœ
    â”‚
    â””â”€â†’ é¢„æµ‹ç»“æœ
            â”‚
            â””â”€â†’ APIè¿”å› â†’ å‰ç«¯å›¾è¡¨å±•ç¤º
```

### 3. æ™ºèƒ½ä½“åˆ†ææµç¨‹

```
æ—¶åºæ•°æ® + æ–‡æœ¬æ•°æ® + å…ƒæ•°æ®
    â”‚
    â”œâ”€â†’ TimeSeriesAgent.analyze_repository()
    â”‚       â”‚
    â”‚       â”œâ”€â†’ KnowledgeBase.load_domain_knowledge()
    â”‚       â”‚       â””â”€â†’ åŠ è½½é¢†åŸŸçŸ¥è¯†
    â”‚       â”‚
    â”‚       â”œâ”€â†’ KnowledgeBase.find_similar_repos()
    â”‚       â”‚       â””â”€â†’ æŸ¥æ‰¾ç›¸ä¼¼é¡¹ç›®
    â”‚       â”‚
    â”‚       â”œâ”€â†’ MultiModalProcessor.fuse()
    â”‚       â”‚       â””â”€â†’ èåˆå¤šæ¨¡æ€æ•°æ®
    â”‚       â”‚
    â”‚       â”œâ”€â†’ build_analysis_prompt()
    â”‚       â”‚       â””â”€â†’ æ„å»ºåˆ†æPrompt
    â”‚       â”‚
    â”‚       â”œâ”€â†’ UnifiedLLMClient.generate()
    â”‚       â”‚       â””â”€â†’ LLMç”Ÿæˆåˆ†ææŠ¥å‘Š
    â”‚       â”‚
    â”‚       â””â”€â†’ parse_analysis()
    â”‚               â””â”€â†’ è§£æç»“æ„åŒ–æŠ¥å‘Š
    â”‚
    â””â”€â†’ ç»¼åˆåˆ†ææŠ¥å‘Š
            â”‚
            â””â”€â†’ APIè¿”å› â†’ å‰ç«¯æŠ¥å‘Šå±•ç¤º
```

---

## ğŸ§© æ¨¡å—ä¾èµ–å…³ç³»

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   app.py (API)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â†’ DataService
         â”‚
         â”œâ”€â†’ TimeSeriesEnhancer â”€â”€â”
         â”‚                         â”‚
         â”œâ”€â†’ LLMTimeSeriesPredictorâ”‚
         â”‚                         â”‚
         â”œâ”€â†’ TimeSeriesAgent â”€â”€â”€â”€â”€â”€â”¤
         â”‚                         â”‚
         â””â”€â†’ QAAgent                â”‚
                                   â”‚
                                   â†“
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚ UnifiedLLMClientâ”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚              â”‚              â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
            â”‚DeepSeekClientâ”‚ â”‚OpenAIClientâ”‚ â”‚ClaudeClientâ”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š ç±»å›¾è®¾è®¡

### Enhanceræ¨¡å—

```
TimeSeriesEnhancer
â”œâ”€ llm_client: UnifiedLLMClient
â”œâ”€ enhance_metric(metric_name, time_series) -> Dict
â”œâ”€ generate_summary(all_metrics) -> str
â”œâ”€ _generate_description() -> str
â”œâ”€ _detect_trends() -> List[Dict]
â”œâ”€ _extract_key_points() -> List[Dict]
â””â”€ _extract_semantic_features() -> Dict
```

### Predictoræ¨¡å—

```
LLMTimeSeriesPredictor
â”œâ”€ llm_client: UnifiedLLMClient
â”œâ”€ predict(metric_name, historical_data, forecast_months) -> Dict
â”œâ”€ _format_timeseries() -> str
â”œâ”€ _build_prompt() -> str
â””â”€ _parse_result() -> Dict
```

### Agentæ¨¡å—

```
TimeSeriesAgent
â”œâ”€ llm_client: UnifiedLLMClient
â”œâ”€ knowledge_base: KnowledgeBase
â”œâ”€ analyze_repository(repo_key, timeseries_data, text_data) -> Dict
â”œâ”€ _load_knowledge() -> Dict
â”œâ”€ _find_similar_repos() -> List[Dict]
â””â”€ _generate_report() -> Dict

KnowledgeBase
â”œâ”€ domain_knowledge: Dict
â”œâ”€ similar_repos: List[Dict]
â”œâ”€ benchmark_data: Dict
â”œâ”€ get_domain_knowledge(category) -> Dict
â”œâ”€ find_similar_repos(repo_key) -> List[Dict]
â””â”€ get_benchmark(metric_name) -> Dict
```

### LLM Clientæ¨¡å—

```
UnifiedLLMClient (æŠ½è±¡åŸºç±»)
â”œâ”€ provider: str
â”œâ”€ client: BaseLLMClient
â”œâ”€ generate(prompt, max_tokens) -> str
â””â”€ _init_client() -> BaseLLMClient

DeepSeekClient (å®ç°)
â”œâ”€ api_key: str
â”œâ”€ base_url: str
â””â”€ ask(question, context) -> str
```

---

## ğŸ”Œ APIæ¥å£è®¾è®¡

### å¢å¼ºæ¥å£

```
GET /api/enhance/<repo_key>/metrics
  â†’ è¿”å›æ‰€æœ‰æŒ‡æ ‡çš„å¢å¼ºä¿¡æ¯

GET /api/enhance/<repo_key>/metric/<metric_name>
  â†’ è¿”å›å•ä¸ªæŒ‡æ ‡çš„å¢å¼ºä¿¡æ¯
  Response: {
    "description": "...",
    "trends": [...],
    "key_points": [...],
    "semantic_features": {...}
  }

GET /api/enhance/<repo_key>/summary
  â†’ è¿”å›æ•´ä½“è¶‹åŠ¿æ€»ç»“
  Response: {
    "summary": "..."
  }
```

### é¢„æµ‹æ¥å£

```
POST /api/predict/<repo_key>
  Request: {
    "metric_name": "OpenRank",
    "forecast_months": 6,
    "include_reasoning": true
  }
  Response: {
    "forecast": {
      "2025-12": 4.8,
      "2026-01": 5.1,
      ...
    },
    "confidence": 0.75,
    "reasoning": "..."
  }
```

### æ™ºèƒ½ä½“æ¥å£

```
POST /api/agent/analyze/<repo_key>
  Request: {
    "analysis_type": "comprehensive",
    "include_comparison": true,
    "include_recommendations": true
  }
  Response: {
    "overall_assessment": "...",
    "key_insights": [...],
    "recommendations": [...],
    "comparison": {...}
  }
```

---

## ğŸ—‚ï¸ æ–‡ä»¶ç»“æ„

```
backend/
â”œâ”€â”€ LLM2TSA/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚
â”‚   â”œâ”€â”€ enhancer.py              # æ¨¡å¼1ï¼šå¢å¼ºå™¨
â”‚   â”‚   â”œâ”€â”€ TimeSeriesEnhancer
â”‚   â”‚   â”œâ”€â”€ TrendDetector
â”‚   â”‚   â””â”€â”€ SemanticFeatureExtractor
â”‚   â”‚
â”‚   â”œâ”€â”€ predictor.py              # æ¨¡å¼2ï¼šé¢„æµ‹å™¨
â”‚   â”‚   â”œâ”€â”€ LLMTimeSeriesPredictor
â”‚   â”‚   â”œâ”€â”€ PromptBuilder
â”‚   â”‚   â””â”€â”€ ResultParser
â”‚   â”‚
â”‚   â”œâ”€â”€ agent.py                  # æ¨¡å¼3ï¼šæ™ºèƒ½ä½“
â”‚   â”‚   â”œâ”€â”€ TimeSeriesAgent
â”‚   â”‚   â”œâ”€â”€ KnowledgeBase
â”‚   â”‚   â””â”€â”€ MultiModalProcessor
â”‚   â”‚
â”‚   â”œâ”€â”€ llm_client.py             # LLMå®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ BaseLLMClient
â”‚   â”‚   â”œâ”€â”€ UnifiedLLMClient
â”‚   â”‚   â”œâ”€â”€ DeepSeekClient
â”‚   â”‚   â””â”€â”€ OpenAIClient (å¯é€‰)
â”‚   â”‚
â”‚   â””â”€â”€ utils.py                  # å·¥å…·å‡½æ•°
â”‚       â”œâ”€â”€ timeseries_formatter
â”‚       â”œâ”€â”€ prompt_templates
â”‚       â””â”€â”€ result_parser
â”‚
â””â”€â”€ KnowledgeBase/
    â”œâ”€â”€ __init__.py
    â”œâ”€â”€ domain_knowledge.py
    â”œâ”€â”€ similar_repo_finder.py
    â””â”€â”€ benchmark_data.py
```

---

## ğŸ¯ å…³é”®è®¾è®¡æ¨¡å¼

### 1. ç­–ç•¥æ¨¡å¼ï¼ˆStrategy Patternï¼‰

ç”¨äºåˆ‡æ¢ä¸åŒçš„LLMæä¾›å•†ï¼š

```python
class BaseLLMClient(ABC):
    @abstractmethod
    def generate(self, prompt: str) -> str:
        pass

class DeepSeekClient(BaseLLMClient):
    def generate(self, prompt: str) -> str:
        # DeepSeekå®ç°
        pass

class UnifiedLLMClient:
    def __init__(self, provider: str):
        if provider == "deepseek":
            self.client = DeepSeekClient()
        elif provider == "openai":
            self.client = OpenAIClient()
```

### 2. æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼ˆTemplate Method Patternï¼‰

ç”¨äºç»Ÿä¸€çš„å¤„ç†æµç¨‹ï¼š

```python
class TimeSeriesEnhancer:
    def enhance_metric(self, metric_name, time_series):
        # æ¨¡æ¿æ–¹æ³•
        description = self._generate_description(...)
        trends = self._detect_trends(...)
        key_points = self._extract_key_points(...)
        return {
            "description": description,
            "trends": trends,
            "key_points": key_points
        }
```

### 3. é€‚é…å™¨æ¨¡å¼ï¼ˆAdapter Patternï¼‰

ç”¨äºç»Ÿä¸€ä¸åŒæ•°æ®æºçš„æ¥å£ï¼š

```python
class UnifiedLLMClient:
    def __init__(self, provider: str):
        # é€‚é…ä¸åŒçš„LLMå®¢æˆ·ç«¯
        if provider == "deepseek":
            self.client = DeepSeekClient()
        # ...
```

---

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

### 1. ç¼“å­˜æœºåˆ¶

```
LLMè°ƒç”¨
    â”‚
    â”œâ”€â†’ æ£€æŸ¥ç¼“å­˜
    â”‚       â”‚
    â”‚       â”œâ”€â†’ å‘½ä¸­ â†’ è¿”å›ç¼“å­˜ç»“æœ
    â”‚       â”‚
    â”‚       â””â”€â†’ æœªå‘½ä¸­ â†’ è°ƒç”¨LLM â†’ å­˜å…¥ç¼“å­˜
    â”‚
    â””â”€â†’ è¿”å›ç»“æœ
```

### 2. æ‰¹é‡å¤„ç†

```
å¤šä¸ªæŒ‡æ ‡å¢å¼ºè¯·æ±‚
    â”‚
    â”œâ”€â†’ åˆå¹¶ä¸ºæ‰¹é‡è¯·æ±‚
    â”‚
    â”œâ”€â†’ å•æ¬¡LLMè°ƒç”¨
    â”‚
    â””â”€â†’ æ‹†åˆ†ç»“æœè¿”å›
```

### 3. å¼‚æ­¥å¤„ç†

```
ç”¨æˆ·è¯·æ±‚
    â”‚
    â”œâ”€â†’ ç«‹å³è¿”å›ï¼ˆä»»åŠ¡IDï¼‰
    â”‚
    â””â”€â†’ åå°å¼‚æ­¥å¤„ç†
            â”‚
            â””â”€â†’ å®Œæˆåé€šçŸ¥å‰ç«¯ï¼ˆSSE/WebSocketï¼‰
```

---

## ğŸ”’ å®‰å…¨ä¸é”™è¯¯å¤„ç†

### é”™è¯¯å¤„ç†æµç¨‹

```
LLMè°ƒç”¨
    â”‚
    â”œâ”€â†’ æˆåŠŸ â†’ è¿”å›ç»“æœ
    â”‚
    â”œâ”€â†’ å¤±è´¥ â†’ é‡è¯•ï¼ˆæœ€å¤š3æ¬¡ï¼‰
    â”‚       â”‚
    â”‚       â”œâ”€â†’ æˆåŠŸ â†’ è¿”å›ç»“æœ
    â”‚       â”‚
    â”‚       â””â”€â†’ å¤±è´¥ â†’ é™çº§ç­–ç•¥
    â”‚               â”‚
    â”‚               â””â”€â†’ è¿”å›é»˜è®¤å€¼/è§„åˆ™åŒ¹é…ç»“æœ
    â”‚
    â””â”€â†’ è¶…æ—¶ â†’ è¿”å›é”™è¯¯ä¿¡æ¯
```

### å®‰å…¨æªæ–½

1. **API Keyç®¡ç†**ï¼šç¯å¢ƒå˜é‡å­˜å‚¨ï¼Œä¸æäº¤åˆ°ä»£ç åº“
2. **è¾“å…¥éªŒè¯**ï¼šéªŒè¯ç”¨æˆ·è¾“å…¥ï¼Œé˜²æ­¢Promptæ³¨å…¥
3. **è¾“å‡ºè¿‡æ»¤**ï¼šè¿‡æ»¤æ•æ„Ÿä¿¡æ¯
4. **é€Ÿç‡é™åˆ¶**ï¼šé™åˆ¶APIè°ƒç”¨é¢‘ç‡

---

**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv1.0  
**æœ€åæ›´æ–°**ï¼š2025-12-05

